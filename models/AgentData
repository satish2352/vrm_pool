const { DataTypes, Model } = require('sequelize');
const { Sequelize } = require("sequelize");

const dbObj = require('../db');


const AgentData = dbObj.define('agentdata', {
  AgentName: {
    type: DataTypes.STRING(255),
    allowNull: true
  },
  AgentEmail: {
    type: DataTypes.STRING(255),
    allowNull: true
  },
  GroupName: {
    type: DataTypes.STRING(255),
    allowNull: true
  },
  IncomingCalls: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  MissedCalls: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  NoAnswer: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  Busy: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  Failed: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  OutgoingCalls: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  TotalCallDurationInMinutes: {
    type: DataTypes.DECIMAL(10, 2),
    allowNull: true
  },
  AverageHandlingTimeInMinutes: {
    type: DataTypes.DECIMAL(5, 2),
    allowNull: true
  },
  DeviceOnPercent: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  DeviceOnHumanReadable: {
    type: DataTypes.STRING(255),
    allowNull: true
  },
  AgentPhoneNumber: {
    type: DataTypes.STRING(15),
    allowNull: true
  },
  createdAt: {
    type: DataTypes.DATE,
    allowNull: false,
    defaultValue: Sequelize.literal('CURRENT_TIMESTAMP'),
    timezone: '+05:30' // Set the desired time zone here, for example, '+00:00' for UTC
  },
  updatedAt: {
    type: DataTypes.DATE,
    allowNull: false,
    defaultValue: Sequelize.literal('CURRENT_TIMESTAMP'),
    timezone: '+05:30' // Set the desired time zone here, for example, '+00:00' for UTC
  }
}, {
  // Other options here
   // Define hooks for manipulating createdAt and updatedAt fields
  //  hooks: {
  //   beforeValidate: (agentData, options) => {
  //     // Set time zone before saving
  //     agentData.createdAt = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' });
  //     agentData.updatedAt = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' });
  //   }
  // }
});

// Synchronize the model with the databas

module.exports = AgentData;